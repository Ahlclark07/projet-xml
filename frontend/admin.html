<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cine Paris | Back-office</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <header class="hero">
    <div class="topbar">
      <div class="logo">Cine Paris</div>
      <nav class="nav">
        <a href="index.html">Accueil</a>
        <a href="films.html">Films</a>
        <a href="cinemas.html">Cinémas</a>
        <a href="admin-login.html" class="active">Admin</a>
      </nav>
    </div>
    <div class="hero__content">
      <p class="eyebrow">Administration</p>
      <h1>Gestion du Contenu</h1>
      <p class="subtitle">Créez et modifiez les cinémas, films et séances.</p>
    </div>
  </header>

  <main class="layout">

    <!-- Create Cinema -->
    <section class="card">
      <div class="section-header">
        <h2>Créer un Cinéma</h2>
      </div>
      <form id="cinema-create-form" class="grid three">
        <label class="field">
          <span>Nom</span>
          <input name="name" type="text" placeholder="Ex: UGC Lyon" required>
        </label>
        <label class="field">
          <span>Ville</span>
          <input name="city" type="text" placeholder="Ex: Paris" required>
        </label>
        <label class="field">
          <span>Adresse</span>
          <input name="address" type="text" placeholder="Ex: 12 Rue X" required>
        </label>
        <div class="actions" style="grid-column: 1/-1;">
          <button type="submit" class="button">Créer le cinéma</button>
        </div>
      </form>
      <p class="status" id="cinema-create-result"></p>
    </section>

    <!-- Create/Update Film -->
    <section class="card">
      <div class="section-header">
        <h2>Film : Création / Modification</h2>
      </div>
      <form id="film-form" class="grid two">
        <label class="field">
          <span>ID (Laisser vide pour Créer)</span>
          <input name="filmId" type="number" min="1" placeholder="Automatique si vide">
        </label>
        <label class="field">
          <span>Titre</span>
          <input name="title" type="text" placeholder="Ex: Inception" required>
        </label>
        <label class="field">
          <span>Durée (min)</span>
          <input name="duration_minutes" type="number" min="1" placeholder="148" required>
        </label>
        <label class="field">
          <span>Langue</span>
          <input name="language" type="text" placeholder="VO" required>
        </label>
        <label class="field">
          <span>Sous-titres</span>
          <input name="subtitles" type="text" placeholder="VF">
        </label>
        <label class="field">
          <span>Réalisateur</span>
          <input name="director" type="text" placeholder="Christopher Nolan" required>
        </label>
        <label class="field">
          <span>Acteurs principaux</span>
          <input name="main_cast" type="text" placeholder="Acteurs..." required>
        </label>
        <label class="field">
          <span>Age minimum</span>
          <input name="min_age" type="number" min="0" placeholder="12">
        </label>
        <label class="field">
          <span>Date début</span>
          <input name="start_date" type="date" required>
        </label>
        <label class="field">
          <span>Date fin</span>
          <input name="end_date" type="date" required>
        </label>
        <label class="field">
          <span>ID Cinéma</span>
          <input name="cinema_id" type="number" min="1" placeholder="1" required>
        </label>
        <label class="field">
          <span>URL Affiche</span>
          <input name="image_url" type="url" placeholder="https://...">
        </label>

        <div class="field" style="grid-column: 1/-1;">
          <div class="label-row" style="display: flex; justify-content: space-between; margin-bottom: 8px;">
            <span>Séances (Initiales)</span>
            <button type="button" id="add-seance" class="button ghost small">Ajouter une ligne</button>
          </div>
          <div id="seances-list" class="stack"></div>
        </div>

        <div class="actions" style="grid-column: 1/-1;">
          <button type="submit" class="button">Enregistrer le film</button>
        </div>
      </form>
      <p class="status" id="film-form-result"></p>
    </section>

    <!-- Add Sessions to existing film -->
    <section class="card">
      <div class="section-header">
        <h2>Ajouter des Séances</h2>
        <p class="muted small">Ajoute sans écraser les existantes</p>
      </div>
      <form id="seance-add-form" class="stack">
        <label class="field">
          <span>Choisir le film</span>
          <!-- Changed from input to select -->
          <select name="filmId" required id="film-select-add">
            <option value="">Chargement des films...</option>
          </select>
        </label>

        <div id="seances-list-extra" class="stack"></div>

        <div class="actions">
          <button type="button" id="add-seance-extra" class="button ghost small">Ajouter une ligne</button>
          <button type="submit" class="button">Valider l'ajout</button>
        </div>
      </form>
      <p class="status" id="seance-add-result"></p>
    </section>

    <!-- Delete Film -->
    <section class="card">
      <div class="section-header">
        <h2>Supprimer un film</h2>
      </div>
      <form id="delete-film-form" class="inline-form" style="align-items: flex-end;">
        <label class="field" style="flex: 1;">
          <span>Choisir le film à supprimer</span>
          <!-- Changed from input to select -->
          <select name="filmId" required id="film-select-delete">
            <option value="">Chargement des films...</option>
          </select>
        </label>
        <button type="submit" class="button danger">Supprimer</button>
      </form>
      <p class="status" id="delete-film-result"></p>
    </section>
  </main>

  <div id="toast" class="toast hidden"></div>
  <script src="common.js"></script>
  <script src="admin.js"></script>
</body>

</html>